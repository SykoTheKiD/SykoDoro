language: android

jdk:
    - oraclejdk7

android:
  components:
    - build-tools-23.0.1
    - android-23
    - platform-tool
    - tool
    - extra-android-support
    - extra-google-google_play_services
    - extra-android-m2repository
    - extra-google-m2repository
    - sys-img-armeabi-v7a-android-23

env:
    global:
        - MALLOC_ARENA_MAX=2
        # install timeout in minutes (2 minutes by default)
        - ADB_INSTALL_TIMEOUT=8


# Emulator Management: Create, Start and Wait
before_script:
    - echo no | android create avd --force --name test --target android-23 --abi armeabi-v7a
    - emulator -avd test -no-skin -no-audio -no-window -gpu off -no-boot-anim &
    - android-wait-for-emulator
    - adb devices
    - adb shell input keyevent 82 &

script:
    - echo $ADB_INSTALL_TIMEOUT
    - android list target
    - ./gradlew clean build

notifications:
    email: false

licenses:
    - '.+'
    - android-sdk-license-.+
